<div id="heroBanner">
    <header></header>
    <nav>

    </nav>
    <div id="siteName">
        Mark &amp; Eleanor
    </div>
    <div id="counter">
        &nbsp;
    </div>
    <div id="rsvpButton">
        <button>RSVP</button> <a href="~/calendar.ics" target="_blank">Add to Calendar</a>
    </div>
</div>
<div class="content">
    <div id="map">
        <h2>Map</h2>
        <div id="googleMap" style="height: 95vh;">

        </div>
    </div>
</div>
<div id="hashTag">
    <h2>#MarkAndEleanor2019</h2>
    <script src="//assets.juicer.io/embed.js" type="text/javascript"></script>
    <link href="//assets.juicer.io/embed.css" media="all" rel="stylesheet" type="text/css" />
    <ul class="juicer-feed" data-feed-id="mark-eleanor-2019"></ul>
</div>

@section Scripts
    {
    <script>
        $(document).ready(function () {
            var weddingDate = moment.tz("2019-05-11 18:30", "Europe/Malta");
            $("#heroBanner #counter").countdown(weddingDate.toDate(), {
                elapse: true,
                //precision: 60000
            }).on('update.countdown', function (event) {
                if (event.elapsed) {
                    var totalHours = event.offset.totalDays * 24 + event.offset.hours;
                    $(this).html("Married! " + event.strftime(totalHours + ' hr %M min %S sec ago!'));
                }
                else {
                    //$(this).html(event.strftime('%-D day%!D'));
                    var totalHours = event.offset.totalDays * 24 + event.offset.hours;
                    $(this).html(event.strftime(totalHours.toLocaleString() + ' hr %M min %S sec'));
                }
            }).countdown('start');
        });

        function initMap() {
            var locations = [
                {
                    position: new google.maps.LatLng(35.826891, 14.527366),
                    marker: 'church',
                    info: '<h1>Birżebbuġa Parish Church</h1><h2>Ceremony</h2>Starts at 18:00'
                },
                {
                    position: new google.maps.LatLng(35.858748, 14.397613),
                    marker: 'reception',
                    info: '<h1>Chateau Buskett</h1><h2>Reception</h2>Starts at 20:00'
                }
            ];
            var church = { lat: 35.826891, lng: 14.527366 };
            var map = new google.maps.Map(document.getElementById('googleMap'), {
                zoom: 16,
                styles: [
                    {
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#f5f5f5"
                            }
                        ]
                    },
                    {
                        "elementType": "labels.icon",
                        "stylers": [
                            {
                                "visibility": "off"
                            }
                        ]
                    },
                    {
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "color": "#616161"
                            }
                        ]
                    },
                    {
                        "elementType": "labels.text.stroke",
                        "stylers": [
                            {
                                "color": "#f5f5f5"
                            }
                        ]
                    },
                    {
                        "featureType": "administrative.land_parcel",
                        "elementType": "labels",
                        "stylers": [
                            {
                                "visibility": "off"
                            }
                        ]
                    },
                    {
                        "featureType": "administrative.land_parcel",
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "color": "#bdbdbd"
                            }
                        ]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#eeeeee"
                            }
                        ]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "labels.text",
                        "stylers": [
                            {
                                "visibility": "off"
                            }
                        ]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "color": "#757575"
                            }
                        ]
                    },
                    {
                        "featureType": "poi.park",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#e5e5e5"
                            }
                        ]
                    },
                    {
                        "featureType": "poi.park",
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "color": "#9e9e9e"
                            }
                        ]
                    },
                    {
                        "featureType": "road",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#ffffff"
                            }
                        ]
                    },
                    {
                        "featureType": "road.arterial",
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "color": "#757575"
                            }
                        ]
                    },
                    {
                        "featureType": "road.highway",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#dadada"
                            }
                        ]
                    },
                    {
                        "featureType": "road.highway",
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "color": "#616161"
                            }
                        ]
                    },
                    {
                        "featureType": "road.local",
                        "elementType": "labels",
                        "stylers": [
                            {
                                "visibility": "off"
                            }
                        ]
                    },
                    {
                        "featureType": "road.local",
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "color": "#9e9e9e"
                            }
                        ]
                    },
                    {
                        "featureType": "transit.line",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#e5e5e5"
                            }
                        ]
                    },
                    {
                        "featureType": "transit.station",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#eeeeee"
                            }
                        ]
                    },
                    {
                        "featureType": "water",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#c9c9c9"
                            }
                        ]
                    },
                    {
                        "featureType": "water",
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "color": "#9e9e9e"
                            }
                        ]
                    }
                ]
            });

            var bounds = new google.maps.LatLngBounds();

            locations.forEach(location => {
                var marker = new google.maps.Marker({
                    position: location.position,
                    map: map
                });
                bounds.extend(marker.position);
                var infoWindows = new google.maps.InfoWindow({
                    content: location.info
                });
                infoWindows.open(map, marker);
                marker.addListener('click', function () {
                    infoWindows.open(map, marker);
                });
            });

            map.fitBounds(bounds);
        }
    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDfhHqLShp8XL0-J4hHQ6wuZB3fdkLeSQ&callback=initMap"></script>

}